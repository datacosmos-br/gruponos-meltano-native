# =============================================================================
# GRUPONOS MELTANO NATIVE - ENVIRONMENT CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Development Environment
# -----------------------------------------------------------------------------
# WMS Oracle Source Database
WMS_ORACLE_HOST=wms-dev-oracle.gruponos.local
WMS_ORACLE_PORT=1521
WMS_ORACLE_SID=WMSDEV
WMS_ORACLE_USERNAME=wms_reader
WMS_ORACLE_PASSWORD=dev_secure_password

# Target Oracle Database  
TARGET_ORACLE_HOST=analytics-dev-oracle.gruponos.local
TARGET_ORACLE_PORT=1521
TARGET_ORACLE_SERVICE_NAME=ANADEV
TARGET_ORACLE_USERNAME=wms_sync
TARGET_ORACLE_PASSWORD=dev_target_password
TARGET_ORACLE_SCHEMA=WMS_SYNC

# Processing Configuration
WMS_BATCH_SIZE=1000
WMS_REQUEST_TIMEOUT=300
TARGET_BATCH_SIZE=5000
TARGET_LOAD_METHOD=upsert
DBT_THREADS=4

# -----------------------------------------------------------------------------
# Staging Environment
# -----------------------------------------------------------------------------
# WMS Oracle Source Database (Staging)
STAGING_WMS_ORACLE_HOST=wms-stg-oracle.gruponos.local
STAGING_WMS_ORACLE_SID=WMSSTG
STAGING_WMS_ORACLE_USERNAME=wms_reader_stg
STAGING_WMS_ORACLE_PASSWORD=staging_secure_password

# Target Oracle Database (Staging)
STAGING_TARGET_ORACLE_HOST=analytics-stg-oracle.gruponos.local
STAGING_TARGET_ORACLE_SERVICE_NAME=ANASTG
STAGING_TARGET_ORACLE_USERNAME=wms_sync_stg
STAGING_TARGET_ORACLE_PASSWORD=staging_target_password
STAGING_TARGET_ORACLE_SCHEMA=WMS_SYNC_STG

# -----------------------------------------------------------------------------
# Production Environment
# -----------------------------------------------------------------------------
# WMS Oracle Source Database (Production)
PROD_WMS_ORACLE_HOST=wms-prod-oracle.gruponos.local
PROD_WMS_ORACLE_SID=WMSPRD
PROD_WMS_ORACLE_USERNAME=wms_reader_prod
PROD_WMS_ORACLE_PASSWORD=production_secure_password

# Target Oracle Database (Production)
PROD_TARGET_ORACLE_HOST=analytics-prod-oracle.gruponos.local
PROD_TARGET_ORACLE_SERVICE_NAME=ANAPRD
PROD_TARGET_ORACLE_USERNAME=wms_sync_prod
PROD_TARGET_ORACLE_PASSWORD=production_target_password
PROD_TARGET_ORACLE_SCHEMA=WMS_SYNC

# -----------------------------------------------------------------------------
# Meltano Configuration
# -----------------------------------------------------------------------------
MELTANO_ENVIRONMENT=dev
MELTANO_PROJECT_ID=fbc8fc3c-b6b7-4d37-9b3a-48a5c8b3a7b9
MELTANO_DATABASE_URI=sqlite:///meltano.db
MELTANO_PROJECT_ROOT=/home/marlonsc/flext/gruponos-meltano-native

# -----------------------------------------------------------------------------
# dbt Configuration
# -----------------------------------------------------------------------------
DBT_PROFILES_DIR=transform/profiles
DBT_PROJECT_DIR=transform
DBT_TARGET=dev
DBT_LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Airflow Configuration (Optional)
# -----------------------------------------------------------------------------
AIRFLOW_HOME=/home/marlonsc/flext/gruponos-meltano-native/orchestrate
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=sqlite:///orchestrate/airflow.db
AIRFLOW__WEBSERVER__WEB_SERVER_PORT=8080
AIRFLOW__WEBSERVER__SECRET_KEY=gruponos_secret_key_change_in_production

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
MELTANO_LOG_LEVEL=info
TAP_ORACLE_WMS_LOG_LEVEL=info
TARGET_ORACLE_LOG_LEVEL=info
DBT_LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Performance Tuning
# -----------------------------------------------------------------------------
# Oracle Connection Pool Settings
ORACLE_CONNECTION_POOL_SIZE=5
ORACLE_CONNECTION_TIMEOUT=60
ORACLE_QUERY_TIMEOUT=300

# Parallel Processing
MELTANO_MAX_WORKERS=4
DBT_THREADS=4
SINGER_BATCH_SIZE=5000

# Memory Settings (in MB)
SINGER_MAX_MEMORY=2048
DBT_MAX_MEMORY=4096

# -----------------------------------------------------------------------------
# Monitoring & Alerting
# -----------------------------------------------------------------------------
ENABLE_MONITORING=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
EMAIL_ALERTS_ENABLED=false
EMAIL_SMTP_SERVER=smtp.gruponos.local
EMAIL_SMTP_PORT=587
EMAIL_FROM_ADDRESS=meltano@gruponos.local
EMAIL_TO_ADDRESSES=data-team@gruponos.local

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------
# Encryption key for sensitive data (change in production)
MELTANO_ENCRYPT_KEY=change_this_encryption_key_in_production

# SSL/TLS Settings
ORACLE_USE_SSL=false
ORACLE_SSL_CERT_PATH=
ORACLE_SSL_KEY_PATH=
ORACLE_SSL_CA_PATH=

# -----------------------------------------------------------------------------
# Backup & Recovery
# -----------------------------------------------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backup/meltano/gruponos-wms

# State Backup
STATE_BACKUP_ENABLED=true
STATE_BACKUP_INTERVAL=3600  # Every hour in seconds

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
DEBUG_MODE=false
DEVELOPMENT_MODE=true
ENABLE_PROFILING=false
ENABLE_QUERY_LOGGING=true

# Test Database Settings
TEST_DATABASE_URL=sqlite:///test_wms.db
TEST_SCHEMA=test_wms_sync

# -----------------------------------------------------------------------------
# Schedule Configuration
# -----------------------------------------------------------------------------
# Allocation sync - every 2 hours
ALLOCATION_SYNC_SCHEDULE="0 */2 * * *"

# Order sync - daily at 2 AM
ORDER_SYNC_SCHEDULE="0 2 * * *"

# Master data sync - weekly on Sunday at 6 AM
MASTER_DATA_SYNC_SCHEDULE="0 6 * * 0"

# Data quality checks - every 4 hours
DATA_QUALITY_CHECK_SCHEDULE="0 */4 * * *"

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_INCREMENTAL_SYNC=true
ENABLE_PARALLEL_EXTRACTION=false
ENABLE_STREAM_MAPS=true
ENABLE_DBT_TESTS=true
ENABLE_DATA_QUALITY_CHECKS=true
ENABLE_PERFORMANCE_MONITORING=true

# -----------------------------------------------------------------------------
# Custom Configuration
# -----------------------------------------------------------------------------
# Business Rules
VALID_ALLOCATION_STATUSES=ALLOCATED,RESERVED,PICKED,SHIPPED
VALID_ORDER_STATUSES=NEW,CONFIRMED,IN_PROGRESS,COMPLETED,CANCELLED

# Data Freshness Thresholds (hours/days)
ALLOCATION_FRESHNESS_HOURS=2
ORDER_FRESHNESS_HOURS=24
MASTER_DATA_FRESHNESS_DAYS=7

# Performance Thresholds
MAX_PROCESSING_TIME_SECONDS=3600
MIN_FULFILLMENT_RATE_PCT=85
MIN_DATA_QUALITY_SCORE_PCT=90